---
import BaseHead from "../components/BaseHead.astro";
import FusionHeader from "../components/react/FusionHeader";
import FusionFooter from "../components/react/FusionFooter";
import CareerTimeline from "../components/react/CareerTimeLine";
import SiliconBackground from "../components/react/SiliconBackground";
import { SITE_TITLE } from "../consts";
import { MapPin, Mail, Link as LinkIcon } from "lucide-react";
import Avatar from "../assets/avatar.jpg";
import { translations } from "@/i18n/translations";

const lang = "en";
const t = translations[lang];
---

<!doctype html>
<html lang="en">
    <head>
        <BaseHead
            title={`${t["nav.about"]} | ${SITE_TITLE}`}
            description="More about me and my journey."
        />
        <script is:inline>
            const theme = (() => {
                if (
                    typeof localStorage !== "undefined" &&
                    localStorage.getItem("theme")
                ) {
                    return localStorage.getItem("theme");
                }
                if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                    return "dark";
                }
                return "light";
            })();
            if (theme === "dark") {
                document.documentElement.classList.add("dark");
            } else {
                document.documentElement.classList.remove("dark");
            }
        </script>
    </head>
    <body class="bg-white dark:bg-black transition-colors duration-500">
        <SiliconBackground client:load />
        <FusionHeader
            client:load
            currentPath="/about"
            lang={lang}
            translations={t}
        />
        <main class="max-w-5xl mx-auto px-6 py-12 sm:py-20 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                {/* 左侧：个人简介 (Sticky) */}
                <div class="md:col-span-1">
                    <div class="sticky top-24">
                        <div
                            class="relative w-32 h-32 mb-8 overflow-hidden rounded-2xl bg-zinc-100 dark:bg-zinc-800"
                        >
                            <!-- 这里替换成你的真实头像 -->
                            <img
                                src={Avatar.src}
                                alt="Avatar"
                                class="object-cover w-full h-full"
                            />
                        </div>

                        <h1
                            class="font-heading text-3xl font-normal text-zinc-900 dark:text-zinc-100 mb-4"
                        >
                            {t["about.name"]}
                        </h1>
                        <div
                            class="text-zinc-500 dark:text-zinc-400 text-sm space-y-3 mb-8"
                        >
                            <div class="flex items-center gap-2">
                                <MapPin size={16} />
                                <span>{t["about.location"]}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <Mail size={16} />
                                <span>oldmeatovo@gmail.com</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <LinkIcon size={16} />
                                <a
                                    href="https://github.com/nonabit"
                                    class="hover:underline">99byte</a
                                >
                            </div>
                        </div>

                        <p
                            class="font-light text-zinc-600 dark:text-zinc-400 leading-relaxed mb-6"
                        >
                            {t["about.motto"]}
                        </p>
                    </div>
                </div>

                {/* 右侧：详细内容 & 时间轴 */}
                <div class="md:col-span-2 space-y-16">
                    {/* Intro Section */}
                    <section>
                        <h2
                            class="font-heading text-2xl font-normal mb-6 text-zinc-900 dark:text-zinc-100"
                        >
                            {t["about.intro.title"]}
                        </h2>
                        <div
                            class="font-light space-y-4 text-zinc-600 dark:text-zinc-400 leading-relaxed"
                        >
                            <p>
                                {t["about.intro.p1"]}
                            </p>
                            <p>
                                {t["about.intro.p2"]}
                            </p>
                            <p>
                                {t["about.intro.p3"]}
                            </p>
                            <p>
                                {t["about.intro.p4"]}
                            </p>
                            <p>
                                {t["about.intro.p5"]}
                            </p>
                            <p>
                                {t["about.intro.p6"]}
                            </p>
                            <p>
                                {t["about.intro.p7"]}
                            </p>
                            <p>
                                {t["about.intro.quote"]}
                            </p>
                        </div>
                    </section>

                    {/* Timeline Section */}
                    <section>
                        <h2
                            class="font-heading text-2xl font-medium text-zinc-900 dark:text-zinc-100 mb-8"
                        >
                            {t["about.career"]}
                        </h2>
                        <CareerTimeline client:visible />
                    </section>

                    {/* Gear / Uses Section (可选) */}
                    <section>
                        <h2
                            class="font-heading text-2xl font-medium text-zinc-900 dark:text-zinc-100 mb-6"
                        >
                            {t["about.gear"]}
                        </h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div
                                class="p-4 rounded-xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800"
                            >
                                <div
                                    class="text-xs font-mono text-zinc-400 mb-1"
                                >
                                    {t["about.gear.editor"]}
                                </div>
                                <div class="font-medium">Zed + Neovim</div>
                            </div>
                            <div
                                class="p-4 rounded-xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800"
                            >
                                <div
                                    class="text-xs font-mono text-zinc-400 mb-1"
                                >
                                    {t["about.gear.terminal"]}
                                </div>
                                <div class="font-medium">Warp / Ghostty</div>
                            </div>
                            <div
                                class="p-4 rounded-xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800"
                            >
                                <div
                                    class="text-xs font-mono text-zinc-400 mb-1"
                                >
                                    {t["about.gear.hardware"]}
                                </div>
                                <div class="font-medium">
                                    MacBook Pro M4 16"
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        {/* 统一的页脚 */}
        <FusionFooter client:visible translations={t} />
    </body>
</html>
